{% extends 'base.html' %}
{% load i18n %}
{% block title %}{{ title }} | {% trans 'Learning management system' %} {% endblock title %}

{% block content %}

<div class="container-fluid py-4">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="/" class="text-decoration-none"><i class="bi bi-house-door me-1"></i>{% trans 'Home' %}</a></li>
      <li class="breadcrumb-item active" aria-current="page"><i class="bi bi-calendar3 me-1"></i>{% trans 'Semester list' %}</li>
    </ol>
  </nav>

  <!-- Page header -->
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-body bg-light">
      <div class="d-flex justify-content-between align-items-center">
        <h4 class="mb-0 d-flex align-items-center">
          <i class="bi bi-calendar-range text-primary me-2"></i>
          <span>{% trans 'Semester List' %}</span>
        </h4>
        {% if request.user.is_superuser %}
        <a class="btn btn-primary" href="{% url 'add_semester' %}">
          <i class="bi bi-plus-circle me-2"></i>{% trans 'Add New Semester' %}
        </a>
        {% endif %}
      </div>
    </div>
  </div>

  {% include 'snippets/messages.html' %}

  <div class="card border-0 shadow-sm">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover m-0">
          <thead class="bg-light">
            <tr>
              <th class="ps-3">#</th>
              <th><i class="bi bi-calendar3-week me-2"></i>{% trans 'Semester' %}</th>
              <th><i class="bi bi-check-circle me-2"></i>{% trans 'Is Current semester' %}</th>
              <th><i class="bi bi-calendar2-date me-2"></i>{% trans 'Session' %}</th>
              <th><i class="bi bi-arrow-right-circle me-2"></i>{% trans 'Next Semester Begins' %}</th>
              {% if request.user.is_superuser %}
              <th class="text-end pe-3"><i class="bi bi-gear me-2"></i>{% trans 'Actions' %}</th>
              {% endif %}
            </tr>
          </thead>
          <tbody>
            {% for semester in semesters %}
            <tr>
              <td class="ps-3">{{ forloop.counter }}.</td>
              <td>{{ semester.semester }}</td>
              <td>
                {% if semester.is_current_semester == False %}
                <span class="badge bg-danger"><i class="bi bi-x-circle me-1"></i>{% trans 'No' %}</span>
                {% else %}
                <span class="badge bg-success"><i class="bi bi-check-circle me-1"></i>{% trans 'Yes' %}</span>
                {% endif %}
              </td>
              <td>{{ semester.session }}</td>
              <td>{{ semester.next_semester_begins }}</td>

              {% if request.user.is_superuser %}
              <td class="text-end pe-3">
                <div class="btn-group">
                  <a href="{% url 'edit_semester' pk=semester.pk %}" class="btn btn-sm btn-outline-primary me-2" title="{% trans 'Edit' %}">
                    <i class="bi bi-pencil-square"></i>
                  </a>
                  <a href="{% url 'delete_semester' pk=semester.pk %}" class="btn btn-sm btn-outline-danger" title="{% trans 'Delete' %}">
                    <i class="bi bi-trash"></i>
                  </a>
                </div>
              </td>
              {% endif %}
            </tr>
            {% empty %}
            <tr>
              <td colspan="{% if request.user.is_superuser %}6{% else %}5{% endif %}" class="text-center py-5">
                <div class="empty-state">
                  <i class="bi bi-calendar-x text-muted" style="font-size: 3rem;"></i>
                  <p class="text-danger mt-3 mb-3">{% trans 'No Semesters Found.' %}</p>
                  {% if request.user.is_superuser %}
                  <a href="{% url 'add_semester' %}" class="btn btn-primary">
                    <i class="bi bi-plus-circle me-2"></i>{% trans 'Add Semester Now' %}
                  </a>
                  {% endif %}
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<style>
  .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2rem;
  }
  tr:hover {
    background-color: rgba(0, 123, 255, 0.03);
  }
</style>
{% endblock content %}