{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load i18n %}

{% block content %}

<nav aria-label="breadcrumb" class="mb-4">
    <ol class="breadcrumb bg-light p-2 rounded shadow-sm">
        <li class="breadcrumb-item"><a href="/" class="text-decoration-none"><i class="bi bi-house-door"></i> {% trans 'Home' %}</a></li>
        <li class="breadcrumb-item"><a href="{% url 'programs' %}" class="text-decoration-none"><i class="bi bi-collection"></i> {% trans 'Programs' %}</a></li>
        <li class="breadcrumb-item"><a href="{{ course.get_absolute_url }}" class="text-decoration-none"><i class="bi bi-book"></i> {{ course }}</a></li>
        <li class="breadcrumb-item"><a href="{% url 'quiz_index' course.slug %}" class="text-decoration-none"><i class="bi bi-question-square"></i> {% trans 'Quizzes' %}</a></li>
        <li class="breadcrumb-item active" aria-current="page"><i class="bi bi-pencil-square"></i> {% trans 'Quiz Form' %}</li>
    </ol>
</nav>

<div class="card border-0 shadow-sm mb-4">
    <div class="card-body bg-light">
        <h4 class="card-title d-flex align-items-center mb-0">
            <i class="bi bi-file-earmark-plus text-primary me-2"></i>
            {% trans 'Quiz form for' %} {{ course|truncatechars:15 }}
        </h4>
    </div>
</div>

<div class="container px-0">
    <form action="" method="POST">{% csrf_token %}
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0 d-flex align-items-center">
                            <i class="bi bi-info-circle text-primary me-2"></i>
                            {% trans 'Basic Information' %}
                        </h5>
                    </div>
                    <div class="card-body">
                        <div hidden>
                            <label for="course">{{ form.course.label }}</label><br> {{ form.course }}
                            <span class="danger">{{ form.course.errors }}</span>
                            <span class="danger">{{ form.course.errors }}</span>
                        </div>                    
                        {{ form.category|as_crispy_field }}                    
                        {{ form.title|as_crispy_field }}
                        {{ form.pass_mark|as_crispy_field }}
                        {{ form.description|as_crispy_field }}
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0 d-flex align-items-center">
                            <i class="bi bi-gear text-primary me-2"></i>
                            {% trans 'Quiz Settings' %}
                        </h5>
                    </div>
                    <div class="card-body">
                        <div hidden>
                            <label for="questions">{{ form.questions.label }}</label><br> {{ form.questions }}
                            <span class="danger">{{ form.questions.errors }}</span>
                            <small class="d-block text-muted">{% trans 'Hold down' %} "Control", {% trans 'or' %} "Command" {% trans 'on a Mac, to select more than one.' %}</small>
                        </div>
                        {{ form.random_order|as_crispy_field }}                    
                        {{ form.answers_at_end|as_crispy_field }}                    
                        {{ form.exam_paper|as_crispy_field }}                    
                        {{ form.single_attempt|as_crispy_field }}                    
                        {{ form.draft|as_crispy_field }}             
                    </div>
                </div>
            </div>
        </div>
        <div class="d-grid gap-2 col-md-4 mx-auto">
            <button class="btn btn-primary my-4" id="{% if form.is_valid %}btn-transition{% endif %}" type="submit">
                <i class="bi bi-save me-2"></i>{% trans 'Save' %} &amp; {% trans 'Continue' %}
            </button>
        </div>
    </form>
</div>

{% endblock %}

{% block js %}
<script>
    const transitionButton = document.getElementById('btn-transition');
    transitionButton.addEventListener('click', () => {
        document.getElementById('card-transition').style.animation = 'card-transition 5s ease-in-out forwards';
    })
</script>
{% endblock js %}

